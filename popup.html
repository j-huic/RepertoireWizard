<!DOCTYPE html>
<html lang="en" data-bs-theme="dark">
  <head>
    <meta charset="UTF-8" />
    <title>Popup</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.8.1/font/bootstrap-icons.min.css"
    />
    <link rel="stylesheet" href="popupStyles.css" />
  </head>

  <body id="body">
    <div class="header-bar">
      <div class="icon-wrapper" id="settingsIcon">
        <i class="bi bi-gear-fill header-icon"></i>
      </div>

      <div class="icon-wrapper" id="infoIcon">
        <i class="bi bi-info-circle-fill header-icon"></i>
      </div>
      <div class="icon-wrapper" id="logsIcon">
        <i class="bi bi-file-earmark-arrow-down-fill header-icon"></i>
      </div>

      <label class="theme-switch">
        <input type="checkbox" id="lightSwitch" />
        <div class="slider" id="lightSlider">
          <i class="bi bi-moon-fill moon-icon"></i>
          <i class="bi bi-sun-fill sun-icon"></i>
        </div>
      </label>
    </div>

    <div class="border-top border-dark-grey"></div>

    <div class="container">
      <!-- prettier-ignore -->
      <div class="collapse mt-2" id="scrapeInfoText">
        <div class="card bg-darker-card card-body smaller-font">
          Navigate to the starting page of the course you wish to scrape, and
          press the start scraping button. For testing/robustness purposes, you
          may choose to scrape fewer chapters at a time (resume the process by pressing again, or abort if necessary). <br> <br>
          The extension will open and close the course chapters in an inactive tab one by one. This is necessary in order to scrape the line PGNs; the process may take a minute or two depending on the size of the course. Remain on the course page with the current window open for best results. 
          <br> <br>
          Once the number of chapters and lines scraped in the below section matches the complete course, press the Save button, after which the course should appear in the settings and be ready for the move highlighting (don't forget to toggle the relevant checkbox in the settings). 
        </div>
      </div>
    </div>

    <div class="container mt-3" id="courseInfoContainer">
      <h6 id="titleHeader" style="text-align: left"></h6>
      <h6 id="courseTitle" class="mb-3"></h6>
      <div
        id="courseInStorage"
        class="alert alert-success align-items-center mt-2"
        role="alert"
        style="padding: 0.25rem 0.5rem; display: none"
      >
        <i class="bi bi-check-circle-fill" style="margin-right: 0.5rem"></i>
        <span class="small-text"> Course data in storage</span>
      </div>
    </div>

    <div class="container" id="scrapeControls">
      <div class="d-flex flex-column align-items-center mt-2 mb-2">
        <h6>Number of chapters to scrape in one go:</h6>
        <label for="rangeSlider" id="sliderLabel"></label>
        <input
          type="range"
          class="form-range"
          min="1"
          max="11"
          id="rangeSlider"
          style="cursor: pointer"
        />
        <div class="align-self-start">
          <div>
            <input type="checkbox" id="skipPausedLines" />
            <label for="skipPausedLines">Skip Paused Lines</label>
          </div>
        </div>
        <button id="startButton" class="btn btn-secondary mt-2 w-100">
          Start Scraping
        </button>
        <div class="d-flex justify-content-between mt-2 w-100">
          <button id="saveButton" class="btn btn-success w-50 me-1">
            Save
          </button>
          <button id="abortButton" class="btn btn-danger w-50 ms-1">
            Abort
          </button>
        </div>
      </div>
      <div>
        <p id="progressText"></p>
        <p id="moveProgress"></p>
        <p id="statusUpdate"></p>
      </div>
    </div>

    <script src="libs/browser-polyfill.js"></script>
    <script src="popup.js"></script>
  </body>
</html>
