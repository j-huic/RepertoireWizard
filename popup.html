<!DOCTYPE html>
<html lang="en" data-bs-theme="dark">
  <head>
    <meta charset="UTF-8" />
    <title>Popup</title>
    <link
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.8.1/font/bootstrap-icons.min.css"
    />

    <style>
      body {
        width: 300px;
        border-radius: 20px;
        overflow: hidden;
      }
      .border-dark-grey {
        border-color: #2a2e33 !important;
        border-width: 2px !important;
      }
      /* Darker background for the expanded content to stand out */
      .bg-darker-card {
        background-color: #1f2327 !important; /* Darker shade */
        color: white;
      }
      .smaller-font {
        font-size: 0.8rem;
      }
    </style>
  </head>
  <body class="bg-dark text-light">
    <!-- Restored Settings Section with Cogwheel Button -->
    <div class="container text-center mt-2 pb-2">
      <h1 class="h5">Settings</h1>
      <button id="settingsButton" class="btn btn-primary mt-2">
        <i class="fas fa-cog"></i>
      </button>
    </div>

    <div class="border-top border-dark-grey my-2"></div>

    <!-- Collapse Section Right Below Header -->
    <div class="container">
      <div class="d-flex justify-content-center align-items-center w-100">
        <h1 class="h6 mb-0">Course Move Scraping</h1>
        <i
          class="bi bi-info-circle ml-2"
          id="scrapeInfoIcon"
          style="cursor: pointer; font-size: 1.25rem"
          data-bs-toggle="collapse"
          data-bs-target="#scrapeInfoText"
          aria-expanded="false"
          aria-controls="scrapeInfoText"
        ></i>
      </div>

      <!-- Collapse Section with Darker Background -->
      <!-- prettier-ignore -->
      <div class="collapse" id="scrapeInfoText">
        <div class="card bg-darker-card card-body smaller-font">
          Navigate to the starting page of the course you wish to scrape, and
          press the start scraping button. For testing/robustness purposes, you
          may choose to scrape fewer chapters at a time (resume the process by pressing again, or abort if necessary). <br> <br>
          The extension will open and close the course chapters in an inactive tab one by one. This is necessary in order to scrape the line PGNs; the process may take a minute or two depending on the size of the course. Remain on the course page with the current window open for best results. 
          <br> <br>
          Once the number of chapters and lines scraped in the below section matches the complete course, press the Save button, after which the course should appear in the settings and be ready for the move highlighting. 
        </div>
      </div>
    </div>
    <div class="border-top border-dark-grey my-2"></div>

    <div id="courseInfoContainer">
      <h6 id="titleHeader" style="text-align: center"></h6>
    </div>

    <div class="container" id="scrapeControls">
      <div class="d-flex flex-column align-items-center mt-3 mb-3">
        <h6>Number of chapters to scrape at a time:</h6>
        <label for="rangeSlider" id="sliderLabel"></label>
        <input
          type="range"
          class="form-range"
          min="1"
          max="11"
          id="rangeSlider"
          style="cursor: pointer"
        />
        <button id="testButton" class="btn btn-secondary mt-3 w-100">
          Start Scraping
        </button>
        <button id="saveButton" class="btn btn-success mt-3 w-100">Save</button>
        <button id="abortButton" class="btn btn-danger mt-3 w-100">
          Abort
        </button>
      </div>
      <div class="container">
        <p id="progressText"></p>
        <p id="moveProgress"></p>
      </div>
    </div>

    <script src="libs/bootstrap.bundle.min.js"></script>
    <script src="libs/browser-polyfill.js"></script>
    <script src="popup.js"></script>
  </body>
</html>
